<!DOCTYPE html>
<html>
<head>
	<title>Interactive Computer Graphics</title>
	<link rel="stylesheet" type="text/css" href="../style.css" />
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://csc.lsu.edu/~kooima/MathJax.js"></script>
	<script type="text/javascript" src="../script.js"></script>
</head>
<body>
	<h1>Vector handling in JavaScript</h1>

	<p>We'll need to perform 3D vector mathematics.</p>

	<p>High-quality Javascript vector libraries <a href="http://glmatrix.net">do exist</a>. However, the textbook does not use one. To minimize dependencies, all necessary vector-handling is defined as simply as possible here.</p>

	<p>Represent a 3D vector as a 3-element JavaScript array. This approach matches the use of nested arrays for <a href="../01-geometry/geometry-10.html">geometry representation</a>. For example:</p>

	<figure class="pseudocode">
	<code>var a = [1, 0, 0];</code><br>
	<code>var b = [0, 1, 0];</code><br>
	</figure>


	<p>Subscripts translate into JavaScript array references.</p>

	<figure class="pseudocode">
		$a_x$ &rarr; <code>a[0]</code><br>
		$a_y$ &rarr; <code>a[1]</code><br>
		$a_z$ &rarr; <code>a[2]</code><br>
	</figure>

	<p>Vector addition is thus an array of array element additions:</p>

	<figure class="pseudocode">
		$\V{a}+\V{b}$ &rarr; <code>[a[0] + b[0], a[1] + b[1], a[2] + b[2]]</code>
	</figure>

	<p>Vector subtraction:</p>

	<figure class="pseudocode">
		$\V{a}-\V{b}$ &rarr; <code>[a[0] - b[0], a[1] - b[1], a[2] - b[2]]</code>
	</figure>

	<p>The dot product is a scalar value:</p>

	<figure class="pseudocode">
		$\V{a}\cdot\V{b}$ &rarr; <code>a[0] * b[0] + a[1] * b[1] + a[2] * b[2]</code>
	</figure>

	<p>The cross product:</p>

	<figure class="pseudocode">
		$\V{a}\times\V{b}$ &rarr; <code>[</code><br>
    &emsp;&emsp;<code>a[1] * b[2] - a[2] * b[1],</code><br>
    &emsp;&emsp;<code>a[2] * b[0] - a[0] * b[2],</code><br>
    &emsp;&emsp;<code>a[0] * b[1] - a[1] * b[0]</code><br>
    <code>]</code>
  </figure>

  <p>To write each of these operations out in full with each use would lead to lengthy and error-prone programs. It's best to translate each of these into a separate JavaScript function. For example:</p>

  <figure class="code">
	  function add(a, b) {<br>
		&nbsp;&nbsp;&nbsp;&nbsp;return [<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[0] + b[0],<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[1] + b[1],<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[2] + b[2]<br>
		&nbsp;&nbsp;&nbsp;&nbsp;];<br>
		}
  </figure>

  <p>Vector normalization is extremely common. Given a JavaScript function for the dot product, a normalize function might look like this:</p>

  <figure class="code">
	  function normalize(a) {<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;var l = Math.sqrt(dot(a, a));<br>
		&nbsp;&nbsp;&nbsp;&nbsp;return [<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[0] / l,<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[1] / l,<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[2] / l,<br>
		&nbsp;&nbsp;&nbsp;&nbsp;];<br>
		}
  </figure>

  <nav>
		<a id="prev" href="viewer-overview.html"></a>
		<a id="home" href="../index.html"></a>
		<a id="next" href="viewer-normal.html"></a>
	</nav>
</body>
</html>
